<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>単語一覧（管理者用）</title>

  <!--
    必要であれば、既存プロジェクトの CSS や Bootstrap を読み込む。
    例）<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
    今は最低限の動作確認が目的なので、必須ではない。
  -->
</head>
<body>
  <h1>単語一覧（管理者用）</h1>
  
  
  <!-- 検索フォーム -->
  <form th:action="@{/admin/words}" method="get">
    <label for="keyword">キーワード検索：</label>
    <input type="text" id="keyword" name="keyword"
           th:value="${keyword}" />
    <button type="submit">検索</button>
    <!-- 全件表示に戻るリンク（keyword と page をクリア） -->
    <a th:href="@{/admin/words}">クリア</a>
  </form>
  
  
  <!-- 新規登録画面へのリンク -->
  <p>
    <a th:href="@{/admin/words/new}">新規登録</a>
  </p>
  
  <!-- 取得件数の簡単な表示。wordList のサイズをそのまま出す。 -->
<!--  <p th:text="'登録件数: ' + ${#lists.size(wordList)} + ' 件'">登録件数: 0 件</p>-->

<!-- 登録件数の表示（全件数 totalCount を使う） -->
<p th:text="'登録件数: ' + ${totalCount} + ' 件'">登録件数: 0 件</p>


  <!-- 単語一覧テーブル -->
  <table border="1">
    <thead>
      <tr>
        <th>ID</th>
        <th>英単語</th>
        <th>日本語</th>
		<th>操作</th> <!-- 編集ボタン用の列 -->
      </tr>
    </thead>
    <tbody>
      <!--
        wordList は AdminWordController で Model に詰めたリスト。
        th:each で 1件ずつ取り出して表示する。
      -->
      <tr th:each="word : ${wordList}">
        <!-- Word.id フィールドの値 -->
        <td th:text="${word.id}">1</td>
        <!-- Word.english フィールドの値 -->
        <td th:text="${word.english}">apple</td>
        <!-- Word.japanese フィールドの値 -->
        <td th:text="${word.japanese}">りんご</td>
		
		<td>
			<!-- 編集画面へのリンク（/admin/words/{id}/edit） -->
			<a th:href="@{'/admin/words/' + ${word.id} + '/edit'}">編集</a>
			
			<!-- 削除処理へのリンク（/admin/words/{id}/delete） -->
			|
			<a th:href="@{'/admin/words/' + ${word.id} + '/delete'}"
			   onclick="return confirm('本当に削除してよろしいですか？');">
			  削除
			</a>
			
		</td>
		
		
      </tr>
    </tbody>
  </table>

  <!-- 今後、ここに「新規登録ボタン」や「検索フォーム」などを追加していく予定 -->
  
  
  <!-- ページネーション表示 -->
  <div>
    <!-- 「ページ X / Y （全 Z 件）」のような情報表示 -->
    <p th:text="'ページ ' + ${currentPage} + ' / ' + ${totalPages} + ' （全 ' + ${totalCount} + ' 件）'">
      ページ 1 / 1 （全 0 件）
    </p>

    <!-- 前へ・ページ番号・次へ -->
    <div>
      <!-- 前へ：1ページ目より後のときだけ表示 -->
      <span th:if="${currentPage > 1}">
<!--        <a th:href="@{/admin/words(page=${currentPage - 1})}">前へ</a>-->
		<a th:href="@{/admin/words(page=${currentPage - 1}, keyword=${keyword})}">前へ</a>
      </span>

      <!-- ページ番号の一覧（1〜totalPages） -->
      <span th:each="i : ${#numbers.sequence(1, totalPages)}">

        <!-- 現在ページはリンクではなく強調表示 -->
        <span th:if="${i == currentPage}"
              th:text="${i}"
              style="font-weight: bold;">
          1
        </span>

        <!-- その他のページはリンクにする -->
        <a th:if="${i != currentPage}"
           th:href="@{/admin/words(page=${i})}"
           th:text="${i}">
          1
        </a>

        <span> </span>
      </span>

      <!-- 次へ：最後のページより前のときだけ表示 -->
      <span th:if="${currentPage < totalPages}">
<!--        <a th:href="@{/admin/words(page=${currentPage + 1})}">次へ</a>-->
		<a th:href="@{/admin/words(page=${currentPage + 1}, keyword=${keyword})}">次へ</a>
      </span>
    </div>
  </div>
  
  
</body>
</html>
