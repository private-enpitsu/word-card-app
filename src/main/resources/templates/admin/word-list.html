<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>単語一覧（管理者用）</title>

  <!-- Bootstrap と独自CSS -->
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
  <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body class="bg-light">
  <div class="container my-4">

    <h1 class="mb-3">単語一覧（管理者用）</h1>

    <!-- 検索フォーム -->
    <form th:action="@{/admin/words}" method="get" class="row gy-2 gx-2 align-items-center mb-3">
      <div class="col-md-6">
        <label for="keyword" class="form-label mb-1">キーワード検索：</label>
        <input
          type="text"
          id="keyword"
          name="keyword"
          th:value="${keyword}"
          class="form-control"
        />
      </div>
      <div class="col-md-auto pt-3">
        <button type="submit" class="btn btn-primary me-2">検索</button>
        <!-- 全件表示に戻るリンク（keyword と page をクリア） -->
        <a th:href="@{/admin/words}" class="btn btn-outline-secondary">クリア</a>
      </div>
    </form>

    <!-- 新規登録画面へのリンク -->
    <div class="mb-2">
      <a th:href="@{/admin/words/new}" class="btn btn-success btn-sm">新規登録</a>
    </div>

    <!-- 登録件数の表示（全件数 totalCount を使う） -->
    <p class="text-muted" th:text="'登録件数: ' + ${totalCount} + ' 件'">
      登録件数: 0 件
    </p>
	
	<div style="margin: 14px 0;">
		<a th:href="@{/admin/home}">トップへ戻る</a>
	</div>

    <!-- 単語一覧テーブル -->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th scope="col">ID</th>
            <th scope="col">英単語</th>
            <th scope="col">日本語</th>
            <th scope="col">操作</th>
          </tr>
        </thead>
        <tbody>
          <!-- wordList は AdminWordController で Model に詰めたリスト -->
          <tr th:each="word : ${wordList}">
            <td th:text="${word.id}">1</td>
            <td th:text="${word.english}">apple</td>
            <td th:text="${word.japanese}">りんご</td>
            <td>
              <!-- 編集画面へのリンク（/admin/words/{id}/edit） -->
              <a th:href="@{'/admin/words/' + ${word.id} + '/edit'}" class="btn btn-sm btn-outline-primary">
                編集
              </a>
              <!-- 削除処理へのリンク（/admin/words/{id}/delete） -->
              <a th:href="@{'/admin/words/' + ${word.id} + '/delete'}"
                 class="btn btn-sm btn-outline-danger ms-1"
                 onclick="return confirm('本当に削除してよろしいですか？');">
                削除
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ページネーション表示 -->
    <div class="mt-3">

      <!-- 「ページ X / Y （全 Z 件）」のような情報表示 -->
      <p class="mb-2"
         th:text="'ページ ' + ${currentPage} + ' / ' + ${totalPages} + ' （全 ' + ${totalCount} + ' 件）'">
        ページ 1 / 1 （全 0 件）
      </p>


	  <!-- 前へ・ページ番号・次へ（Bootstrap pagination） -->
	  <nav aria-label="ページナビゲーション">
	    <ul class="pagination"
	        th:with="start=${currentPage - 1}, end=${currentPage + 1}">

	      <!-- 前へ -->
	      <li class="page-item" th:classappend="${currentPage <= 1} ? ' disabled'">
	        <a class="page-link"
	           th:href="@{/admin/words(page=${currentPage - 1}, keyword=${keyword})}"
	           aria-label="前へ">
	          <span aria-hidden="true">&laquo;</span>
	        </a>
	      </li>

	      <!-- 先頭ページ（1ページ目） -->
	      <li class="page-item"
	          th:classappend="${currentPage == 1} ? ' active'">
	        <a class="page-link"
	           th:href="@{/admin/words(page=${1}, keyword=${keyword})}">
	          1
	        </a>
	      </li>

	      <!-- 左側の省略記号 -->
	      <li class="page-item disabled"
	          th:if="${currentPage > 3}">
	        <span class="page-link">…</span>
	      </li>

	      <!-- 中央付近のページ（currentPage-1 ～ currentPage+1 の範囲で、2 ～ totalPages-1 に収まるものだけ） -->
	      <li class="page-item"
	          th:each="i : ${#numbers.sequence(start, end)}"
	          th:if="${i > 1 and i < totalPages}"
	          th:classappend="${i == currentPage} ? ' active'">
	        <a class="page-link"
	           th:href="@{/admin/words(page=${i}, keyword=${keyword})}"
	           th:text="${i}">
	          2
	        </a>
	      </li>

	      <!-- 右側の省略記号 -->
	      <li class="page-item disabled"
	          th:if="${currentPage < totalPages - 2}">
	        <span class="page-link">…</span>
	      </li>

	      <!-- 最終ページ（totalPages が 2 以上のときだけ表示） -->
	      <li class="page-item"
	          th:if="${totalPages > 1}"
	          th:classappend="${currentPage == totalPages} ? ' active'">
	        <a class="page-link"
	           th:href="@{/admin/words(page=${totalPages}, keyword=${keyword})}"
	           th:text="${totalPages}">
	          10
	        </a>
	      </li>

	      <!-- 次へ -->
	      <li class="page-item" th:classappend="${currentPage >= totalPages} ? ' disabled'">
	        <a class="page-link"
	           th:href="@{/admin/words(page=${currentPage + 1}, keyword=${keyword})}"
	           aria-label="次へ">
	          <span aria-hidden="true">&raquo;</span>
	        </a>
	      </li>

	    </ul>
	  </nav>

	  
	  
    </div>

  </div>

  <!-- Bootstrap の JavaScript -->
  <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
