<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>è‹±å˜èª4æŠã‚¯ã‚¤ã‚ºï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¾Œï¼‰</title>

	<!-- Ocean ãƒ†ãƒ¼ãƒCSS -->
	<link rel="stylesheet" th:href="@{/css/ocean-theme.css}" />

	<style>
		/* ãƒ­ã‚°ã‚¤ãƒ³å¾Œã‚¯ã‚¤ã‚ºç‰¹æœ‰ã®å°‘ã—ã ã‘è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */

		.home-link {
			/*margin-top: -10px;*/
			font-size: 0.9rem;
		}

		.home-link a {
			color: #0288d1;
			text-decoration: none;
		}

		.home-link a:hover {
			text-decoration: underline;
		}

		/* é¸æŠè‚¢ãƒœã‚¿ãƒ³ï¼ˆquiz.html ã®ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ã‚‹ï¼‰ */
		.answers-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 15px;
			margin-bottom: 25px;
		}

		.quiz-choice-btn.answer-btn {
			background: #ffffff;
			border: 2px solid #b3e5fc;
			border-radius: 12px;
			padding: 18px;
			font-size: 16px;
			color: #01579b;
			cursor: pointer;
			transition: all 0.3s ease;
			font-weight: 500;
			text-align: center;
		}

		.quiz-choice-btn.answer-btn:hover {
			background: #e0f7ff;
			border-color: #81d4fa;
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(33, 147, 176, 0.4);
		}

		.quiz-choice-btn.answer-btn.disabled {
			cursor: default;
			pointer-events: none;
			opacity: 0.9;
		}

		/* æ­£è§£ãƒ»ä¸æ­£è§£ï¼ˆocean-theme ã¨åˆã‚ã›ã¦å„ªå…ˆåº¦å¼·åŒ–ï¼‰ */
		.quiz-choice-btn.answer-btn.quiz-choice-correct-clicked {
			background-color: #00bfa5 !important;
			border-color: #00bfa5 !important;
			color: #ffffff !important;
			font-weight: 700;
			text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.25);
		}

		.quiz-choice-btn.answer-btn.quiz-choice-wrong-clicked {
			background-color: #ff6f61 !important;
			border-color: #ff6f61 !important;
			color: #ffffff !important;
		}

		.quiz-choice-btn.answer-btn.quiz-choice-correct-answer {
			background-color: #00bfa5 !important;
			border-color: #00bfa5 !important;
			color: #ffffff !important;
			font-weight: 700;
			text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.25);
		}

		/* ã‚¹ãƒãƒ›èª¿æ•´ */
		@media (max-width: 600px) {
			.quiz-container {
				padding: 24px;
				margin: 0 10px;
			}

			.question-text {
				font-size: 20px;
			}

			.quiz-choice-btn.answer-btn {
				padding: 14px;
				font-size: 14px;
			}

			.answers-grid {
				gap: 10px;
			}
		}
	</style>
</head>

<body>

	<!-- å…±é€šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ -->
	<div th:replace="~{fragments/user-header :: userHeader}"></div>

	<div class="content-wrap"><!--content-wrap-->

		<div class="quiz-container">

			<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
			<div class="header">
				<h1>ğŸŒŠ è‹±å˜èª4æŠã‚¯ã‚¤ã‚º</h1>
<!--				<p class="login-header-sub" th:if="${loginUser != null}">-->
<!--					ãƒ­ã‚°ã‚¤ãƒ³ä¸­ï¼š<span th:text="${loginUser.name}">User Name</span>-->
<!--				</p>-->
<!--				<p class="home-link">-->
<!--					<a th:href="@{/user/home}">ãƒ¦ãƒ¼ã‚¶ãƒ¼HOMEã¸æˆ»ã‚‹</a>-->
<!--				</p>-->
			</div>

			<!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³çµ±ä¸€ã®ãŸã‚è¨­ç½®ï¼‰ -->
			<div class="progress-bar">
				<div class="progress-fill"></div>
			</div>

			<!-- å•é¡Œæ–‡ -->
			<div class="question-section">
				<p class="question-text">
					ã€Œ<span th:text="${questionWord.english}">today</span>ã€ã®æ„å‘³ã¯ï¼Ÿ
				</p>
			</div>

			<!-- æ­£è§£ã®æ—¥æœ¬èªï¼ˆJavaScriptå‚ç…§ç”¨ï¼‰ -->
			<input type="hidden" id="correctJapanese" th:value="${correctJapanese}" />

			<!-- é¸æŠè‚¢ -->
			<div class="answers-grid" id="choices-container">
				<button type="button" class="quiz-choice-btn answer-btn" th:each="choice : ${choices}"
					th:text="${choice}" th:attr="data-choice=${choice}">
					ã‚µãƒ³ãƒ—ãƒ«é¸æŠè‚¢
				</button>
			</div>

			<!-- ä¸æ­£è§£æ™‚ã®ã¿è¡¨ç¤ºã™ã‚‹ã€Œæ¬¡ã¸ã€ -->
			<div class="quiz-next-wrapper">
				<button id="nextButton" class="quiz-next-button" type="button" style="display: none;">
					æ¬¡ã¸
				</button>
			</div>
		</div>

	</div><!--content-wrap-->

	<!-- JSï¼šã‚¯ãƒªãƒƒã‚¯åˆ¤å®š -->
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const correctJapanese = document.getElementById("correctJapanese").value;
			const choiceButtons = document.querySelectorAll(".quiz-choice-btn");
			const nextButton = document.getElementById("nextButton");

			let answered = false;

			choiceButtons.forEach(function (btn) {
				btn.addEventListener("click", function () {
					if (answered) return;
					answered = true;

					const selected = btn.getAttribute("data-choice");

					// å¤šé‡ã‚¯ãƒªãƒƒã‚¯ç¦æ­¢
					choiceButtons.forEach((b) => b.classList.add("disabled"));

					if (selected === correctJapanese) {
						// æ­£è§£
						btn.classList.add("quiz-choice-correct-clicked");

						setTimeout(() => {
							window.location.href = "/user/quiz";
						}, 1500);

					} else {
						// ä¸æ­£è§£
						btn.classList.add("quiz-choice-wrong-clicked");

						choiceButtons.forEach((b) => {
							if (b.getAttribute("data-choice") === correctJapanese) {
								b.classList.add("quiz-choice-correct-answer");
							}
						});

						nextButton.style.display = "inline-block";
						nextButton.addEventListener("click", function () {
							window.location.href = "/user/quiz";
						});
					}
				});
			});
		});
	</script>
</body>

</html>